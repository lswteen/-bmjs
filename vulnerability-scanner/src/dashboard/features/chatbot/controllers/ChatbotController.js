/**
 * Chatbot Controller
 * Handles HTTP requests for AI chatbot operations
 */
export class ChatbotController {
    constructor(chatbotService) {
        this.chatbotService = chatbotService;
    }

    /**
     * Send a message to the chatbot and get a response
     * @param {Object} req - Express request
     * @param {Object} res - Express response
     */
    async sendMessage(req, res) {
        try {
            const { message, conversationHistory } = req.body;

            if (!message) {
                return res.status(400).json({
                    success: false,
                    error: 'Message is required'
                });
            }

            const response = await this.chatbotService.processMessage(
                message,
                conversationHistory || []
            );

            res.json({
                success: true,
                response
            });
        } catch (error) {
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    }

    /**
     * Get chatbot status
     * @param {Object} req - Express request
     * @param {Object} res - Express response
     */
    async getStatus(req, res) {
        try {
            const status = await this.chatbotService.getStatus();
            res.json({
                success: true,
                ...status
            });
        } catch (error) {
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    }
}
